generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id                   String            @id @default(auto()) @map("_id") @db.ObjectId
  email                String            @unique
  password             String?
  usersNotificationsId String?           @db.ObjectId
  userInformations     UserInformations?
  userSettings         UserSettings?
  userNotifications    Notifications?
  userSites            Sites[]
}

model UserSettings {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  user   User   @relation(fields: [userId], references: [id])
  userId String @unique @db.ObjectId
  lang   Lang   @default(fr)
}

model Notifications {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  status     Status   @default(inProgress)
  content    String?
  allUser    Boolean  @default(false)
  userId     String?  @unique @db.ObjectId
  user       User?    @relation(fields: [userId], references: [id])
  created_at DateTime
}

model UserInformations {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  user        User    @relation(fields: [userId], references: [id])
  userId      String  @unique @db.ObjectId
  firstname   String?
  lastname    String?
  phoneNumber String?
  siret       String?
  tva         Int?
  city        String?
  State       String?
  zip         String?
  adress      String?
}

model Sites {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  link          String
  documents     Documents[]
  interventions Interventions[]
  solutions     Solutions[]
  detail        SitesDetail?
  user          User            @relation(fields: [userId], references: [id])
  userId        String          @db.ObjectId
}

model SitesDetail {
  id     String  @id @default(auto()) @map("_id") @db.ObjectId
  siteId String? @unique @db.ObjectId
  site   Sites?  @relation(fields: [siteId], references: [id])
}

model Documents {
  id      String @id @default(auto()) @map("_id") @db.ObjectId
  sites   Sites  @relation(fields: [sitesId], references: [id])
  sitesId String @db.ObjectId
}

model Interventions {
  id                 String    @id @default(auto()) @map("_id") @db.ObjectId
  link               String
  start_intervention DateTime
  end_intervention   DateTime?
  intern_description String
  global_description String
  site               Sites     @relation(fields: [siteId], references: [id])
  siteId             String    @db.ObjectId
}

model Solutions {
  id      String  @id @default(auto()) @map("_id") @db.ObjectId
  link    String
  icon    String
  Sites   Sites?  @relation(fields: [sitesId], references: [id])
  sitesId String? @db.ObjectId
}

enum Lang {
  fr
  en
}

enum Status {
  done
  inProgress
}
